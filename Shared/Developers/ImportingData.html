<!DOCTYPE html>
<html xmlns:MadCap="http://www.madcapsoftware.com/Schemas/MadCap.xsd" lang="en-us" xml:lang="en-us" class="withMenu" data-mc-search-type="Stem" data-mc-help-system-file-name="index.xml" data-mc-path-to-help-system="../../" data-mc-conditions="Review.ReviewOff" data-mc-target-type="WebHelp2" data-mc-runtime-file-type="Topic" data-mc-preload-images="false" data-mc-in-preview-mode="false" data-mc-toc-path="Developer's Guide|Fundamentals">
    <head>
        <meta name="viewport" content="width=device-width, initial-scale=1.0" />
        <meta charset="utf-8" />
        <meta http-equiv="X-UA-Compatible" content="IE=edge" />
        <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
        <meta name="description" content="How to import data into your Splice Machine database." /><title>Importing Data into Your Splice Machine Database</title>
        <link href="../../Skins/Default/Stylesheets/Slideshow.css" rel="stylesheet" data-mc-generated="True" />
        <link href="../../Skins/Default/Stylesheets/TextEffects.css" rel="stylesheet" data-mc-generated="True" />
        <link href="../../Skins/Default/Stylesheets/Topic.css" rel="stylesheet" data-mc-generated="True" />
        <link href="../../Skins/Default/Stylesheets/Components/Styles.css" rel="stylesheet" data-mc-generated="True" />
        <link href="../../Skins/Default/Stylesheets/Components/Tablet.css" rel="stylesheet" data-mc-generated="True" />
        <link href="../../Skins/Default/Stylesheets/Components/Mobile.css" rel="stylesheet" data-mc-generated="True" />
        <link href="../../Resources/Stylesheets/SpliceTriPaneStyles.css" rel="stylesheet" />
        <script src="../../Resources/Scripts/custom.modernizr.js">
        </script>
        <script src="../../Resources/Scripts/jquery.min.js">
        </script>
        <script src="../../Resources/Scripts/require.min.js">
        </script>
        <script src="../../Resources/Scripts/require.config.js">
        </script>
        <script src="../../Resources/Scripts/foundation.min.js">
        </script>
        <script src="../../Resources/Scripts/plugins.min.js">
        </script>
        <script src="../../Resources/Scripts/MadCapAll.js">
        </script>
    </head>
    <body>
        <p class="MCWebHelpFramesetLink MCWebHelpFramesetLinkTop"><a href="../../index.html#Shared/Developers/ImportingData.html">Open topic with navigation</a>
        </p>
        <div class="TopicContent">
            <h1>Importing Data Into Splice Machine</h1>
            <p>This topic describes how to import data into your Splice Machine database, using built-in procedures for <span class="ItalicFont">Importing Data</span> and <span class="ItalicFont">Upserting Data</span>. </p>
            <h2>About Bulk Loading of Data into Splice Machine</h2>
            <p>There are several ways of inserting data into your Splice Machine database, You can:</p>
            <ul>
                <li value="1">use an ETL tool that can connect with Splice Machine via ODBC or JDBC</li>
                <li value="2">insert data into existing tables using SQL statements such as <span class="CodeFont">Insert</span></li>
            </ul>
            <p>Those methods work, but they do not leverage the parallel processing power of your cluster. Many of our customers need to import large amounts of data using a bulk load operation. For example, when moving data from an existing database into Splice Machine after initial installation, or for situations like when a financial trading firm wants to update the data for stock trading transactions in the past 24 hours.</p>
            <p>The Splice Machine <span class="CodeFont"><a href="../SQLReference/BuiltInSysProcs/ImportData.html">SYSCS_UTIL.IMPORT_DATA</a></span>&#160;and <span class="CodeFont"><a href="../SQLReference/BuiltInSysProcs/UpsertDataFromFile.html">SYSCS_UTIL.UPSERT_DATA_FROM_FILE</a></span>&#160;built-in system procedures allow you to perform bulk imports that utilize the parallel processing power of Hadoop's scale-out architecture while distributing the data evenly into different region servers to prevent "hot spots." We utilize a custom-built, asynchronous write pipeline, which is an extension to the native HBase pipeline, to accomplish this effort.</p>
            <p>Our bulk import process provides a number of significant advantages in comparison to traditional Hadoop ETL processes:</p>
            <ul>
                <li value="1">Includes error and consistency checking of incoming data allows for rejection of incorrect data sets; for example, primary key violations and invalid data such as a wrong data type.</li>
                <li value="2">You can monitor progress using, as shown in our <a href="../ManagementConsole/Intro.ManagementConsole.html"><span class="ItalicFont">Splice Machine Management Console Guide</span></a>.</li>
                <li value="3">Provides a consistent view of data even when numerous concurrent updates are occurring.</li>
                <li value="4">Our write processes do not block read processes.</li>
                <li value="5">Incremental updates and upserts are allowed.</li>
            </ul>
            <h3>Importing a Subset of Data From a File</h3>
            <p>When you import data from a file into a table, all of the data in the file is not necessarily imported. This can happen in either of these circumstances:</p>
            <ul>
                <li value="1">If the table into which you're importing contains less columns than does the data file, the "extra"&#160;columns of data at the end of each line are ignored. For example, if your table contains columns <span class="CodeFont">(a, b, c)</span> and your file contains columns <span class="CodeFont">(a, b, c, d, e)</span>, then the data in your file's <span class="CodeFont">d</span> and <span class="CodeFont">e</span> columns will be ignored. See <a href="#Example">Example 1: Importing data into a table with fewer columns than in the file</a> at the end of this topic.</li>
                <li value="2">If the <span class="CodeFont">insertColumnList</span> in your import call specifies only a subset of the columns in the data file, then only those columns are imported; however, intervening columns in your table are then overwritten with default values.   For example, if your table contains columns <span class="CodeFont">(a, b, c)</span> and you only want to import columns <span class="CodeFont">(a, c)</span>, then the data in table's <span class="CodeFont">b</span> column will be replaced with the default value for that column. See <a href="#Example2">Example 2: Importing a subset of data from a file into a table</a> at the end of this topic </li>
            </ul>
            <p>Note that this means that you cannot import multiple subsets into different tables from the same input file.</p>
            <h2>Using Our Import and Upsert Procedures</h2>
            <p>The  <span class="CodeFont"><a href="../SQLReference/BuiltInSysProcs/ImportData.html">SYSCS_UTIL.IMPORT_DATA</a></span>&#160;and <span class="CodeFont"><a href="../SQLReference/BuiltInSysProcs/UpsertDataFromFile.html">SYSCS_UTIL.UPSERT_DATA_FROM_FILE</a></span>&#160;built-in system procedures are nearly identical in syntax and function. The difference is the <span class="CodeFont"><a href="../SQLReference/BuiltInSysProcs/UpsertDataFromFile.html">SYSCS_UTIL.UPSERT_DATA_FROM_FILE</a></span>&#160;procedure first determines if the database already contains a record that matches an incoming record:</p>
            <ul>
                <li value="1">If a matching record is found in the database, that record is updated with column values from the incoming record.</li>
                <li value="2">If no matching record is found in the database, the incoming record is added to the database as a new record, exactly as it would be if had you called <span class="CodeFont"><a href="../SQLReference/BuiltInSysProcs/ImportData.html">SYSCS_UTIL.IMPORT_DATA</a></span>.</li>
            </ul>
            <p>The  <span class="CodeFont"><a href="../SQLReference/BuiltInSysProcs/ImportData.html">SYSCS_UTIL.IMPORT_DATA</a></span>&#160;and <span class="CodeFont"><a href="../SQLReference/BuiltInSysProcs/UpsertDataFromFile.html">SYSCS_UTIL.UPSERT_DATA_FROM_FILE</a></span>&#160;built-in system procedures both 			import data to a subset of columns in a table. You choose the subset of columns
			by specifying insert columns.</p>
            <p class="noteNote" data-mc-autonum="NOTE: &#160;"><span class="autonumber"><span class="noteAutoNum">NOTE: &#160;</span></span>The <span class="CodeFont">SYSCS_UTIL.SYSCS_IMPORT_DATA</span>&#160;system procedure, which operates similarly to <span class="CodeFont">SYSCS_UTIL.IMPORT_DATA</span>and was available in earlier versions of Splice Machine, is targeted for eventual deprecation and is no longer documented.</p>
            <p>After a successful import completes, a simple report displays, showing how many files were imported or checked, and how many record imports or checks succeeded or failed. (Note that you can ignore the <span class="CodeFont">numtasks</span> value shown in this report).</p>
            <p class="noteImportant" data-mc-autonum="IMPORTANT: &#160;"><span class="autonumber"><span class="noteAutoNum">IMPORTANT: &#160;</span></span>On a cluster, the files to be imported <span class="BoldFont">MUST be on HDFS (or MapR-FS)</span> and must be readable by the <span class="CodeFont">hbase</span> user.</p>
            <h2>Syntax</h2>
            <div class="preWrapper"><pre class="FcnSyntax" xml:space="preserve">call SYSCS_UTIL.IMPORT_DATA (
		<span class="ItalicFont">schemaName</span>,
		<span class="ItalicFont">tableName</span>,
		<span class="ItalicFont">insertColumnList</span><span class="CodeFont"> |&#160;null</span>,
		<span class="ItalicFont">fileOrDirectoryName</span>,
		<span class="ItalicFont">columnDelimiter</span><span class="CodeFont"> |&#160;null</span>,
		<span class="ItalicFont">characterDelimiter</span><span class="CodeFont"> |&#160;null</span>,
		<span class="ItalicFont">timestampFormat</span><span class="CodeFont"> |&#160;null</span>,
		<span class="ItalicFont">dateFormat</span><span class="CodeFont"> |&#160;null</span>,
		<span class="ItalicFont">timeFormat</span><span class="CodeFont"> |&#160;null</span>,
		<span class="ItalicFont">badRecordsAllowed</span>,
		<span class="ItalicFont">badRecordDirectory</span><span class="CodeFont"> |&#160;null</span>,
		<span class="ItalicFont">oneLineRecords</span><span class="CodeFont"> |&#160;null</span>,
		<span class="ItalicFont">charset</span><span class="CodeFont"> |&#160;null</span>
		);</pre>
            </div>
            <div class="preWrapper">
                <p>&#160;</p>
            </div>
            <div class="preWrapper"><pre class="FcnSyntax" xml:space="preserve">call SYSCS_UTIL.UPSERT_DATA_FROM_FILE (
		<span class="ItalicFont">schemaName</span>,
		<span class="ItalicFont">tableName</span>,
		<span class="ItalicFont">insertColumnList</span><span class="CodeFont"> |&#160;null</span>,
		<span class="ItalicFont">fileOrDirectoryName</span>,
		<span class="ItalicFont">columnDelimiter</span><span class="CodeFont"> |&#160;null</span>,
		<span class="ItalicFont">characterDelimiter</span><span class="CodeFont"> |&#160;null</span>,
		<span class="ItalicFont">timestampFormat</span><span class="CodeFont"> |&#160;null</span>,
		<span class="ItalicFont">dateFormat</span><span class="CodeFont"> |&#160;null</span>,
		<span class="ItalicFont">timeFormat</span><span class="CodeFont"> |&#160;null</span>,
		<span class="ItalicFont">badRecordsAllowed</span>,
		<span class="ItalicFont">badRecordDirectory</span><span class="CodeFont"> |&#160;null</span>,
		<span class="ItalicFont">oneLineRecords</span><span class="CodeFont"> |&#160;null</span>,
		<span class="ItalicFont">charset</span><span class="CodeFont"> |&#160;null</span>
		);</pre>
            </div>
            <div class="paramList">
                <p class="paramName">schemaName</p>
                <p class="paramDefnFirst">The name of the schema of the table in which to import.</p>
                <p class="paramName">tableName</p>
                <p class="paramDefnFirst">The name of the table in which to import.</p>
                <p class="paramName">insertColumnList</p>
                <p class="paramDefnFirst">The names, in single quotes, of the columns to import. If this is <span class="CodeFont">null</span>, all columns are imported.</p>
                <div class="notePlain">
                    <p>If you don't specify a specify an <span class="CodeFont">insertColumnList</span> and your input file contains more columns than are in the table, then the the extra columns at the end of each line in the input file <span class="BoldFont">are ignored</span>. For example, if your table contains columns <span class="CodeFont">(a, b, c)</span> and your file contains columns <span class="CodeFont">(a, b, c, d, e)</span>, then the data in your file's <span class="CodeFont">d</span> and <span class="CodeFont">e</span> columns will be ignored.</p>
                    <p>If you do specify an <span class="CodeFont">insertColumnList</span>, and the number of columns doesn't match your table, then any other columns in your table will be replaced by the default value for the table column (or <span class="CodeFont">NULL</span>&#160;if there is no default for the column).  For example, if your table contains columns <span class="CodeFont">(a, b, c)</span> and you only want to import columns <span class="CodeFont">(a, c)</span>, then the data in table's <span class="CodeFont">b</span> column will be replaced with the default value for that column.</p>
                </div>
                <p class="paramName">fileOrDirectoryName</p>
                <p class="paramDefnFirst">Either a single file or a directory. If this is a single file, that file is imported; if this is a directory, all of the files in that directory are imported. Note that files can be compressed or uncompressed, including BZIP2 compressed files.</p>
                <div class="notePlain">
                    <p>Note that importing multiple files at once improves parallelism, and thus speeds up the import process. Uncompressed files can be imported faster than compressed files. When using compressed files, the compression algorithm makes a difference; for example,</p>
                    <ul>
                        <li value="1"><span class="CodeFont">gzip</span>-compressed files cannot be split during importation, which means that import work on such files cannot be performed in parallel.</li>
                        <li value="2">In contrast, <span class="CodeFont">bzip2</span>-compressed files can be split and thus can be imported using parallel tasks. Note that <span class="CodeFont">bzip2</span> is CPU&#160;intensive compared to <span class="CodeFont">LZ4</span> or <span class="CodeFont">LZ0</span>, but is faster than gzip because files can be split.</li>
                    </ul>
                </div>
            </div>
            <div class="paramList">
                <p class="paramName">columnDelimiter</p>
                <p class="paramDefnFirst">The character used to separate columns, Specify <span class="CodeFont">null</span> if using the comma (<span class="CodeFont">,</span>)&#160;character as your delimiter. </p>
                <div>
                    <p class="paramDefn">In addition to using single characters, you can specify the following special characters as delimiters:</p>
                    <table summary="Special characters that can be used as character delimiters in imported files.">
                        <col />
                        <col />
                        <thead>
                            <tr>
                                <th>Special character</th>
                                <th>Display</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr>
                                <td class="CodeFont">\t</td>
                                <td>Tab </td>
                            </tr>
                            <tr>
                                <td class="CodeFont">\f</td>
                                <td>Formfeed</td>
                            </tr>
                            <tr>
                                <td class="CodeFont">\b</td>
                                <td>Backspace</td>
                            </tr>
                            <tr>
                                <td class="CodeFont">\\</td>
                                <td>Backslash</td>
                            </tr>
                            <tr>
                                <td class="CodeFont">^a (or ^A)</td>
                                <td>
                                    <p>Control-a</p>
                                    <p class="noteIndent" data-mc-autonum="NOTE: &#160;"><span class="autonumber"><span class="noteAutoNum">NOTE: &#160;</span></span>If you are using a script file from the <span class="CodeFont">splice&gt;</span>&#160;command line, your script can contain the actual <span class="CodeFont">Control-a</span> character as the value of this parameter.</p>
                                </td>
                            </tr>
                        </tbody>
                    </table>
                </div>
                <p class="paramName">characterDelimiter</p>
                <p class="paramDefnFirst">Specifies which character is used to delimit strings in the imported data. You can specify <span class="CodeFont">null</span> or the empty string to use the default string delimiter, which is the double-quote (<span class="CodeFont">"</span>).</p>
                <div>
                    <p class="paramDefn">In addition to using single characters, you can specify the following special characters as delimiters:</p>
                    <table summary="Special characters that can be used as character delimiters in imported files.">
                        <col />
                        <col />
                        <thead>
                            <tr>
                                <th>Special character</th>
                                <th>Display</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr>
                                <td class="CodeFont">\t</td>
                                <td>Tab </td>
                            </tr>
                            <tr>
                                <td class="CodeFont">\f</td>
                                <td>Formfeed</td>
                            </tr>
                            <tr>
                                <td class="CodeFont">\b</td>
                                <td>Backspace</td>
                            </tr>
                            <tr>
                                <td class="CodeFont">\\</td>
                                <td>Backslash</td>
                            </tr>
                            <tr>
                                <td class="CodeFont">^a (or ^A)</td>
                                <td>
                                    <p>Control-a</p>
                                    <p class="noteIndent" data-mc-autonum="NOTE: &#160;"><span class="autonumber"><span class="noteAutoNum">NOTE: &#160;</span></span>If you are using a script file from the <span class="CodeFont">splice&gt;</span>&#160;command line, your script can contain the actual <span class="CodeFont">Control-a</span> character as the value of this parameter.</p>
                                </td>
                            </tr>
                        </tbody>
                    </table>
                </div>
                <p class="paramDefnFirst">If your input contains control characters such as newline characters, make sure that those characters are embedded within delimited strings.</p>
                <p class="noteNote" data-mc-autonum="NOTE: &#160;"><span class="autonumber"><span class="noteAutoNum">NOTE: &#160;</span></span>To use the single quote (<span class="CodeFont">'</span>) character as your string delimiter, you need to escape that character. This means that you specify four quotes (<span class="CodeFont">''''</span>)&#160;as the value of this parameter. This is standard SQL&#160;syntax.<br /><br />	The <a class="WithinBook MCXref xref xrefWithinBook" href="#Examples" xrefformat="{para}">Examples</a> section below contains an example that uses the single quote as the string delimiter character.</p>
                <p class="paramName">timestampFormat</p>
                <p class="paramDefnFirst">
			The format of timestamps stored in the file. You can set this to <span class="CodeFont">null</span> if there are no time columns in the file, or if the format of any timestamps in the file match the <span class="CodeFont">Java.sql.Timestamp</span> default format, which is: "<span class="ItalicFont">yyyy-MM-dd HH:mm:ss</span>". See the <a class="WithinBook MCXref xref xrefWithinBook" href="#TimestampFormats" xrefformat="{para}">About Timestamp Formats</a> section below for more information about timestamps.</p>
                <p class="noteNote" data-mc-autonum="NOTE: &#160;"><span class="autonumber"><span class="noteAutoNum">NOTE: &#160;</span></span>All of the timestamps in the file you are importing must use the same format.</p>
                <p class="paramName">dateFormat</p>
                <p class="paramDefnFirst">The format of datestamps stored in the file. You can set this to <span class="CodeFont">null</span> if there are no date columns in the file, or if the format of any dates in the file match pattern: "<span class="ItalicFont">yyyy-MM-dd</span>".<br /></p>
                <p class="paramName">timeFormat</p>
                <p class="paramDefnFirst">The format of time values stored in the file. You can set this to null if there are no time columns in the file, or if the format of any times in the file match pattern: "<span class="ItalicFont">HH:mm:ss</span>".</p>
                <div>
                    <p class="paramName">badRecordsAllowed</p>
                    <p class="paramDefnFirst">The number of rejected (bad)&#160;records that are tolerated before the import fails. If this count of rejected records is reached, the import fails, and any successful record imports are rolled back.
			<ul><li value="1">If you specify <span class="CodeFont">-1</span> as the value of this parameter, all record import failures are tolerated and logged.</li><li value="2">If you specify <span class="CodeFont">0</span> as the value of this parameter, the import will fail if even one record is bad.</li></ul><p class="noteIcon">In previous releases of Splice Machine, this parameter was named <span class="CodeFont">failBadRecordCount</span>, and a value of <span class="CodeFont">0</span> meant that all record import failures were tolerated. This has been changed, and you now must specify a value of <span class="CodeFont">-1</span> for <span class="CodeFont">badRecordsAllowed</span> to tolerate all bad records.</p></p>
                    <p class="paramName">badRecordDirectory</p>
                    <p class="paramDefnFirst">The directory in which bad record information is logged. Splice Machine logs information to the <span class="CodeFont"><span class="CodeItalicFont">&lt;import_file_name&gt;</span>.bad</span> file in this directory; for example, bad records in an input file named <span class="CodeFont">foo.csv</span> would be logged to a file named <span class="ItalicFont">badRecordDirectory</span><span class="CodeFont">/foo.csv.bad</span>.</p>
                    <p class="paramDefn">The default value is the directory in which the import files are found.</p>
                    <p class="paramName">oneLineRecords</p>
                    <p class="paramDefnFirst">A&#160;Boolean value that specifies whether each line in the import file contains one complete record:</p>
                    <ul class="nested">
                        <li value="1">If you specify <span class="CodeFont">true</span> or <span class="CodeFont">null</span>, then each record is expected to be found on a single line in the file.</li>
                        <li value="2">If you specify <span class="CodeFont">false</span>, records can span multiple lines in the file.</li>
                    </ul>
                    <p class="noteNote" data-mc-autonum="NOTE: &#160;"><span class="autonumber"><span class="noteAutoNum">NOTE: &#160;</span></span>Multi-line record files are slower to load, because the file cannot be split and processed in parallel; if you import a directory of multiple line files, each file as a whole is processed in parallel, but no splitting takes place.</p>
                    <p class="paramName">charset</p>
                    <p class="paramDefnFirst">The character encoding of the import file. The default value is UTF-8. Currently, any other value is ignored and UTF-8 is used. 
 </p>
                </div>
            </div>
            <h2>Handling Generated Column Values in Imported Files</h2>
            <p>If you're importing data into a table with generated columns (see <span class="CodeFont"><a href="../SQLReference/Statements/GeneratedColumnSpec.html" class="MCXref xref" xrefformat="{para}">generated-column-spec</a></span> in the <span class="ItalicFont">SQL&#160;Reference Manual</span>), you should know that imported records are handled in exactly the same manner as are records inserted using the <span class="CodeFont"><a href="../SQLReference/Statements/Insert.html" class="MCXref xref" xrefformat="{para}">INSERT</a></span>&#160;statement. </p>
            <p>Here's a simple summary of what happens for generated columns, including <span class="CodeFont">DEFAULT</span>&#160;values, in imported records:</p>
            <ul>
                <li value="1">If your <span class="CodeFont">importColumnList</span> includes the column name and the imported column value is empty, <span class="CodeFont">NULL</span>&#160;is inserted into the database table column.</li>
                <li value="2">If your <span class="CodeFont">importColumnList</span> includes the column name and the imported column value is not empty, the column value is imported unless the value is not valid in the table.</li>
                <li value="3">If you <span class="CodeFont">importColumnList</span> does not include the column name, the generated value is inserted into the database table column.</li>
            </ul>
            <h3>Generated Column Import Examples</h3>
            <p>To illustrate what happens with generated column values in imported records, we'll use this simple database table created with this statement:</p><pre class="Example">CREATE&#160;TABLE&#160;myTable (<br />&#160;&#160;&#160;colA&#160;INT,<br />&#160;&#160;&#160;colB&#160;CHAR(4)&#160;DEFAULT&#160;'myDefaultVal',<br />&#160;&#160;&#160;colC&#160;INT);</pre>
            <table summary="Detailed example of what gets imported for different input values.">
                <col />
                <col />
                <col />
                <col />
                <thead>
                    <tr>
                        <th><span class="CodeBoldFont">insertColumnList</span>
                        </th>
                        <th>Values in import record</th>
                        <th>Values inserted into database</th>
                        <th>Notes</th>
                    </tr>
                </thead>
                <tbody>
                    <tr>
                        <td class="CodeFont">"A,B,C"</td>
                        <td class="CodeFont">1,,2</td>
                        <td class="CodeFont">[1,NULL,2]</td>
                        <td>&#160;</td>
                    </tr>
                    <tr>
                        <td class="CodeFont">"A,B,C"</td>
                        <td class="CodeFont">3,de,4</td>
                        <td class="CodeFont">[3,de,4]</td>
                        <td>&#160;</td>
                    </tr>
                    <tr>
                        <td class="CodeFont">"A,B,C"</td>
                        <td class="CodeFont">1,2</td>
                        <td class="CodeFont">Error:&#160;column B&#160;wrong type</td>
                        <td>&#160;</td>
                    </tr>
                    <tr>
                        <td class="CodeFont">"A,B,C"</td>
                        <td class="CodeFont">1,DEFAULT,2</td>
                        <td class="CodeFont">[1,"DEFAULT",2]</td>
                        <td><span class="CodeFont">DEFAULT</span>&#160;is imported as a literal value</td>
                    </tr>
                    <tr>
                        <td class="CodeFont">Empty</td>
                        <td class="CodeFont">1,,2</td>
                        <td class="CodeFont">[1,NULL,2]</td>
                        <td>&#160;</td>
                    </tr>
                    <tr>
                        <td class="CodeFont">Empty</td>
                        <td class="CodeFont">3,de,4</td>
                        <td class="CodeFont">[3,de,4]</td>
                        <td>&#160;</td>
                    </tr>
                    <tr>
                        <td class="CodeFont">Empty</td>
                        <td class="CodeFont">1,2</td>
                        <td class="CodeFont">Error: column B&#160;wrong type</td>
                        <td>&#160;</td>
                    </tr>
                    <tr>
                        <td class="CodeFont">"A,C"</td>
                        <td class="CodeFont">1,2</td>
                        <td class="CodeFont">[1,myDefaultVal,2]</td>
                        <td>&#160;</td>
                    </tr>
                    <tr>
                        <td class="CodeFont">"A,C"</td>
                        <td class="CodeFont">3,4</td>
                        <td class="CodeFont">[3,myDefaultVal,4]</td>
                        <td>&#160;</td>
                    </tr>
                </tbody>
            </table>
            <p> Note that the value <span class="CodeFont">DEFAULT</span> in the imported file <span class="BoldFont">is not interpreted</span> to mean that the default value should be applied to that column; instead:</p>
            <ul>
                <li value="1">If the target column in your database has a string data type, such as <span class="CodeFont">CHAR</span> or <span class="CodeFont">VARCHAR</span>, the literal value <span class="CodeFont">"DEFAULT"</span>&#160;is inserted into your database..</li>
                <li value="2">If the target column is not a string data type, an error will occur.</li>
            </ul>
            <h3>How to Use Generated Values for a Column in Some (but not all)&#160;Imported Records</h3>
            <p>If you are importing a file into a table with a generated column, and you want to import some records with actual values and apply generated values to other records, you need to split your import file into two files and import each:</p>
            <ul>
                <li value="1">Import the file containing records with non-default values with the column name included in the <span class="CodeFont">insertColumnList</span>.</li>
                <li value="2">Import the file  containing records with default values with the column name excluded from the <span class="CodeFont">insertColumnList</span>.</li>
            </ul>
            <p class="noteNote" data-mc-autonum="NOTE: &#160;"><span class="autonumber"><span class="noteAutoNum">NOTE: &#160;</span></span>When you export a table with generated columns to a file, the actual column values are exported, so importing that same file into a different database will accurately replicate the original table values.</p>
            <h2>Record Import Failure Reasons</h2>
            <p>When upserting data from a file, the input file you generate must contain:</p>
            <ul>
                <li value="1">the columns to be changed</li>
                <li value="2">all <span class="CodeFont">NON_NULL</span>&#160;columns</li>
            </ul>
            <p>Typical reasons for a row (record)&#160;import to fail include:</p>
            <ul>
                <li value="1">Improper data expected for a column.</li>
                <li value="2">Improper number of columns of data.</li>
                <li value="3">
                    <p>A primary key violation:&#160;<span class="CodeFont"><a href="../SQLReference/BuiltInSysProcs/ImportData.html">SYSCS_UTIL.IMPORT_DATA</a></span> and <span class="CodeFont"><a href="../SQLReference/BuiltInSysProcs/UpsertDataFromFile.html">SYSCS_UTIL.UPSERT_DATA_FROM_FILE</a></span>&#160;will only work correctly if the table into which you are inserting/updating has primary keys. </p>
                </li>
            </ul>
            <h3>Compacting Tables After Bulk Imports</h3>
            <p>We recommend that you run a full compaction on tables into which you have imported a large amount of data, using the <span class="CodeFont"><a href="../SQLReference/BuiltInSysProcs/PerformMajorCompactionOnTable.html">SYSCS_UTIL.SYSCS_PERFORM_MAJOR_COMPACTION_ON_TABLE</a></span> system procedure.</p>
            <h2><a name="TimestampFormats"></a>About Timestamp Formats</h2>
            <div>
                <p>Splice Machine uses the following Java date and time pattern letters to construct timestamps:</p>
                <table summary="Timestamp format pattern letter descriptions">
                    <col />
                    <col />
                    <col style="width: 330px;" />
                    <thead>
                        <tr>
                            <th>Pattern Letter</th>
                            <th>Description</th>
                            <th>Format(s)</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td class="CodeFont">y</td>
                            <td>year</td>
                            <td class="CodeFont">yy or yyyy</td>
                        </tr>
                        <tr>
                            <td class="CodeFont">M</td>
                            <td>month</td>
                            <td class="CodeFont">MM</td>
                        </tr>
                        <tr>
                            <td class="CodeFont">d</td>
                            <td>day in month</td>
                            <td class="CodeFont">dd</td>
                        </tr>
                        <tr>
                            <td class="CodeFont">h</td>
                            <td>hour (0-12)</td>
                            <td class="CodeFont">hh</td>
                        </tr>
                        <tr>
                            <td class="CodeFont">H</td>
                            <td>hour (0-23)</td>
                            <td class="CodeFont">HH</td>
                        </tr>
                        <tr>
                            <td class="CodeFont">m</td>
                            <td>minute in hour</td>
                            <td class="CodeFont">mm</td>
                        </tr>
                        <tr>
                            <td class="CodeFont">s</td>
                            <td>seconds</td>
                            <td class="CodeFont">ss</td>
                        </tr>
                        <tr>
                            <td class="CodeFont">S</td>
                            <td>tenths of seconds</td>
                            <td class="CodeFont">
                                <p>S, SS, SSS, SSSS, SSSSS or SSSSSS<span class="important">*</span></p>
                                <p><span class="important">*</span><span class="bodyFont">Specify </span>SSSSSS <span class="bodyFont">to allow a variable number (any number)&#160;of digits after the decimal point.</span></p>
                            </td>
                        </tr>
                        <tr>
                            <td class="CodeFont">z</td>
                            <td>time zone text</td>
                            <td class="CodeFont">e.g. Pacific Standard time</td>
                        </tr>
                        <tr>
                            <td class="CodeFont">Z</td>
                            <td>time zone, time offset</td>
                            <td class="CodeFont">e.g. -0800</td>
                        </tr>
                    </tbody>
                </table>
                <p>The default timestamp format for Splice Machine imports is: <span class="CodeFont">yyyy-MM-dd HH:mm:ss</span>, which uses a 24-hour clock, does not allow for decimal digits of seconds, and does not allow for time zone specification. </p>
                <p class="noteNote" data-mc-autonum="NOTE: &#160;"><span class="autonumber"><span class="noteAutoNum">NOTE: &#160;</span></span>The standard Java library does not support microsecond precision, so you <span class="BoldFont">cannot</span> specify millisecond (<span class="CodeFont">S</span>) values in a custom timestamp format and import such values with the desired precision. </p>
                <h3>Timestamps and Importing Data at Different Locations</h3>
                <p>Note that timestamp values are relative to the geographic location at which they are imported, or more specifically, relative to the timezone setting and daylight saving time status where the data is imported.</p>
                <p>This means that timestamp values from the same data file may appear differently after being imported in different timezones.</p>
                <h3>Examples</h3>
                <p>The following tables shows valid examples of timestamps and their corresponding format (parsing)&#160;patterns:</p>
                <table>
                    <col />
                    <col />
                    <col />
                    <thead>
                        <tr>
                            <th>Timestamp value</th>
                            <th>Format Pattern</th>
                            <th>Notes</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td class="CodeFont">2013-03-23 09:45:00</td>
                            <td class="CodeFont">yyyy-MM-dd HH:mm:ss</td>
                            <td>This is the default pattern.</td>
                        </tr>
                        <tr>
                            <td class="CodeFont">2013-03-23 19:45:00.98-05</td>
                            <td class="CodeFont">yyyy-MM-dd HH:mm:ss.SSZ</td>
                            <td>This pattern allows up to 2 decimal digits of seconds, and requires a time zone specification.</td>
                        </tr>
                        <tr>
                            <td class="CodeFont">2013-03-23 09:45:00-07</td>
                            <td class="CodeFont">yyyy-MM-dd HH:mm:ssZ</td>
                            <td>This patterns requires a time zone specification, but does not allow for decimal digits of seconds.</td>
                        </tr>
                        <tr>
                            <td class="CodeFont">2013-03-23 19:45:00.98-0530</td>
                            <td class="CodeFont">yyyy-MM-dd HH:mm:ss.SSZ</td>
                            <td>This pattern allows up to 2 decimal digits of seconds, and requires a time zone specification.</td>
                        </tr>
                        <tr>
                            <td class="CodeFont">
                                <p>2013-03-23 19:45:00.123</p>
                                <p>2013-03-23 19:45:00.12</p>
                            </td>
                            <td class="CodeFont">yyyy-MM-dd HH:mm:ss.SSS</td>
                            <td>
                                <p>This pattern allows up to 3 decimal digits of seconds, but does not allow a time zone specification.</p>
                                <p>Note that if your data specifies more than 3 decimal digits of seconds, an error occurs.</p>
                            </td>
                        </tr>
                        <tr>
                            <td class="CodeFont">2013-03-23 19:45:00.1298</td>
                            <td class="CodeFont">yyyy-MM-dd HH:mm:ss.SSSS</td>
                            <td>This pattern allows up to 4 decimal digits of seconds, but does not allow a time zone specification.</td>
                        </tr>
                    </tbody>
                </table>
            </div>
            <p>Please see <span class="ItalicFont"><a href="Fundamentals/WorkingWithDates.html">Working With Date and Time Values</a></span> in the <span class="ItalicFont">Developer's Guide</span> for information working with timestamps, dates, and times.</p>
            <h2><a name="Examples"></a>Examples</h2>
            <p>The examples in this section illustrate using different timestamp formats and different string delimiter characters.</p>
            <p>Note that these examples work for either importing or upserting data:&#160;you can simply substitute <span class="CodeFont">UPSERT_DATA_FROM_FILE</span>&#160;in place of <span class="CodeFont">IMPORT_DATA</span> in any of the system procedure calls below.</p>
            <h3><a name="Example"></a>Example 1: Importing data into a table with fewer columns than in the file</h3>
            <p>If the table into which you're importing data has less columns than the data file that you're importing, the "extra"&#160;data columns in the file are ignored. For example, if you create a table with this statement:</p>
            <div class="preWrapper"><pre class="Example" xml:space="preserve">CREATE&#160;TABLE&#160;playerTeams(ID int primary key, Team VARCHAR(32));</pre>
            </div>
            <p>And your data file looks like this:</p>
            <div class="preWrapper"><pre class="Example" xml:space="preserve">1,Cards,Molina,Catcher<br />2,Giants,Posey,Catcher<br />3,Royals,Perez,Catcher</pre>
            </div>
            <p>When you import the file into <span class="CodeFont">playerTeams</span>, only the first two columns are imported:</p>
            <div class="preWrapperWide"><pre class="Example" xml:space="preserve">call SYSCS_UTIL.IMPORT_DATA('SPLICE','playerTeams',null, 'myData.csv',
   null, null, null, null, null, 0, 'importErrsDir', true, null);<br /><br />SELECT&#160;*&#160;FROM&#160;playerTeams ORDER&#160;by ID;<br />ID   |TEAM &#160;  
--------------
1    |Cards<br />2    |Giants
3    |Royals<br /><br />3 rows selected
</pre>
            </div>
            <h3><a name="Example2"></a>Example 2: Importing a subset of data from a file into a table</h3>
            <p>This example uses the same table and import file as does the previous example, and it produces the same results, The difference between these two examples is that this one explicitly imports only the first two columns (which are named <span class="CodeFont">ID</span>&#160;and <span class="CodeFont">TEAM</span>)&#160;of the file:</p>
            <div class="preWrapper"><pre class="Example" xml:space="preserve">call SYSCS_UTIL.IMPORT_DATA('SPLICE','playerTeams', 'ID, TEAM', 'myData.csv',
 null, null, null, null, null, 0, 'importErrsDir', true, null);<br /><br />SELECT&#160;*&#160;FROM&#160;playerTeams ORDER&#160;by ID;<br />ID   |TEAM&#160;   
--------------
1    |Cards<br />2    |Giants
3    |Royals<br /><br />3 rows selected
</pre>
            </div>
            <h3>Example 3: Specifying a timestamp format for an entire table</h3>
            <p>Use a single timestamp format for the entire table by explicitly specifying a single <span class="CodeFont">timeStampFormat</span>.</p>
            <div class="preWrapper"><pre class="Example" xml:space="preserve">Mike,2013-04-21 09:21:24.98-05
Mike,2013-04-21 09:15:32.78-04
Mike,2013-03-23 09:45:00.68-05</pre>
            </div>
            <p>You can then import the data with the following call:</p>
            <div class="preWrapper"><pre class="Example" xml:space="preserve">call SYSCS_UTIL.IMPORT_DATA('app','tabx','c1,c2',
	'/path/to/ts3.csv',
	',', '''', 
	<span class="BoldFont">'yyyy-MM-dd HH:mm:ss.SSZ'</span>,
	null, null, 0, null, true, null);</pre>
            </div>
            <p>Note that for any import use case shown above, the time shown in the imported table depends on the timezone setting where the data is imported. In other words, given the same csv file, if imported at locations with different time zones, the value in the table shown will be different. Additionally, daylight savings time may account for a 1-hour difference if timezone is specified.</p>
            <h3>Example 4:&#160;Importing strings with embedded special characters </h3>
            <p>This example imports a csv file that includes newline (<span class="CodeFont">Ctrl-M</span>)&#160;characters in some of the input strings. We use the default double-quote as our character delimiter to import data such as the following:</p>
            <div class="preWrapperWide"><pre class="Example" xml:space="preserve">1,This field is one line,Able
2,"This field has two lines
This is the second line of the field",Baker
3,This field is also just one line,Charlie
</pre>
            </div>
            <p>We then use the following call to import the data:</p>
            <div class="preWrapperWide"><pre class="Example" xml:space="preserve">SYSCS_UTIL.IMPORT_DATA('SPLICE', 'MYTABLE', null, 'data.csv' , '\t', null, null, null, null, 0, 'importErrsDir', false, null);
</pre>
            </div>
            <p>We can also explicitly specify double quotes (or any other character)&#160;as our delimiter character for strings:</p>
            <div class="preWrapperWide"><pre class="Example" xml:space="preserve">SYSCS_UTIL.IMPORT_DATA('SPLICE', 'MYTABLE', null, 'data.csv', '\t', '"', null, null, null, 0, 'importErrsDir', false, null);</pre>
            </div>
            <h3>Example 5:&#160;Using single quotes to delimit strings</h3>
            <p>This example performs the same import as the previous example, simply substituting single quotes for double quotes as the character delimiter in the input:</p>
            <div class="preWrapperWide"><pre class="Example" xml:space="preserve">1,This field is one line,Able
2,'This field has two lines
This is the second line of the field',Baker
3,This field is also just one line,Charlie
</pre>
            </div>
            <p>Note that you must escape single quotes in SQL, which means that you actually define the character delimiter parameter with four single quotes, as follow</p>
            <div class="preWrapperWide"><pre class="Example" xml:space="preserve">SYSCS_UTIL.IMPORT_DATA('SPLICE', 'MYTABLE', null, 'data.csv', '\t', '''', null, null, null, 0, 'importErrsDir', false, null);
</pre>
            </div>
            <h2>See Also</h2>
            <ul>
                <li value="1"><span class="CodeFont"><a href="../SQLReference/BuiltInSysProcs/PerformMajorCompactionOnTable.html">SYSCS_UTIL.SYSCS_PERFORM_MAJOR_COMPACTION_ON_TABLE</a></span> in the <span class="ItalicFont">SQL&#160;Reference Manual</span></li>
            </ul>
            <p style="font-size: 6pt;margin-top: 0;margin-bottom: 0;">&#160;</p>
        </div>
    </body>
</html>