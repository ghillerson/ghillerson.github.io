<!DOCTYPE html>
<html xmlns:MadCap="http://www.madcapsoftware.com/Schemas/MadCap.xsd" lang="en-us" xml:lang="en-us" class="withMenu" data-mc-search-type="Stem" data-mc-help-system-file-name="index.xml" data-mc-path-to-help-system="../../../" data-mc-conditions="Review.ReviewOff" data-mc-target-type="WebHelp2" data-mc-runtime-file-type="Topic" data-mc-preload-images="false" data-mc-in-preview-mode="false" data-mc-toc-path="Developer's Guide|Fundamentals">
    <head>
        <meta name="viewport" content="width=device-width, initial-scale=1.0" />
        <meta charset="utf-8" />
        <meta http-equiv="X-UA-Compatible" content="IE=edge" />
        <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
        <meta name="description" content="Describes our implementation of foreign keys and how our implementation ensures referential integrity." /><title>Using Foreign Keys</title>
        <link href="../../../Skins/Default/Stylesheets/Slideshow.css" rel="stylesheet" data-mc-generated="True" />
        <link href="../../../Skins/Default/Stylesheets/TextEffects.css" rel="stylesheet" data-mc-generated="True" />
        <link href="../../../Skins/Default/Stylesheets/Topic.css" rel="stylesheet" data-mc-generated="True" />
        <link href="../../../Skins/Default/Stylesheets/Components/Styles.css" rel="stylesheet" data-mc-generated="True" />
        <link href="../../../Skins/Default/Stylesheets/Components/Tablet.css" rel="stylesheet" data-mc-generated="True" />
        <link href="../../../Skins/Default/Stylesheets/Components/Mobile.css" rel="stylesheet" data-mc-generated="True" />
        <link href="../../../Resources/Stylesheets/SpliceTriPaneStyles.css" rel="stylesheet" />
        <script src="../../../Resources/Scripts/custom.modernizr.js">
        </script>
        <script src="../../../Resources/Scripts/jquery.min.js">
        </script>
        <script src="../../../Resources/Scripts/require.min.js">
        </script>
        <script src="../../../Resources/Scripts/require.config.js">
        </script>
        <script src="../../../Resources/Scripts/foundation.min.js">
        </script>
        <script src="../../../Resources/Scripts/plugins.min.js">
        </script>
        <script src="../../../Resources/Scripts/MadCapAll.js">
        </script>
    </head>
    <body>
        <p class="MCWebHelpFramesetLink MCWebHelpFramesetLinkTop"><a href="../../../index.html#Shared/Developers/Fundamentals/ForeignKeys.html">Open topic with navigation</a>
        </p>
        <div class="TopicContent">
            <h1>Foreign Keys and Referential Integrity</h1>
            <p>This topic describes the Splice Machine implementation of <span class="ItalicFont">foreign keys</span> and how our implementation ensures referential integrity.</p>
            <p>See our <span class="ItalicFont">SQL&#160;Reference Manual</span> for full reference information about defining foreign keys using <a href="../../SQLReference/Clauses/Constraint.html">constraint clauses</a> when <a href="../../SQLReference/Statements/CreateTable.html">creating </a>a database table.</p>
            <h2>About Foreign Keys</h2>
            <p>A foreign key is a column or group of columns in a relational database table that provides a link between data in two tables. A foreign key acts as a cross-reference between tables in that it references the primary key or unique key columns of another table, and thus establishes a link between them.</p>
            <p>The purpose of a foreign key is to identify a particular row of the referenced table; as such, the foreign key must be equal to the key in some row of the primary table, or else be <span class="CodeFont">null</span>. This rule is called a <span class="ItalicFont">referential integrity constraint between the two tables</span>, and is usually abbreviated as just <span class="ItalicFont">referential integrity</span>. </p>
            <h3>Maintaining Referential Integrity</h3>
            <p>To maintain referential integrity, Splice Machine ensures that database operations do not violate foreign key constraints, including not allowing any operations that will cause a foreign key to not correspond to a row in the referenced table. This can happen when a row is inserted, updated, or deleted in either table.</p>
            <p> For example, suppose you have:</p>
            <ul>
                <li value="1">A table named <span class="CodeFont">Players</span> with primary key <span class="CodeFont">player_id</span>. This table is called the <span class="ItalicFont">parent table</span> or <span class="ItalicFont">referenced table</span>.</li>
                <li value="2">
                    <p>A second table named <span class="CodeFont">PlayerStats</span> has a foreign key, which is also a column named <span class="CodeFont">player_id</span>. This table is called the <span class="ItalicFont">child table</span> or <span class="ItalicFont">referencing table</span>.</p>
                </li>
            </ul>
            <p>The <span class="CodeFont">player_id</span> column in the <span class="ItalicFont">referencing</span> table is the foreign key that references the primary key <span class="CodeFont">player_id</span> in the <span class="ItalicFont">referenced</span> table. </p>
            <p>When you insert a new record into the referencing <span class="CodeFont">PlayerStats</span> table, the insertion must satisfy the foreign key constraint, which means that it must include a <span class="CodeFont">player_id</span> value that is present in the referenced <span class="CodeFont">Players</span> table. If this is not so, the insert operation fails in order to maintain the table's referential integrity.</p>
            <h3>About Foreign Key Constraints</h3>
            <p>You can define a foreign key constraint on a table when you create the table with the <span class="CodeFont"><a href="../../SQLReference/Statements/CreateTable.html">CREATE&#160;TABLE</a></span>&#160;statement. Foreign key constraints are always immediate:&#160;a violation of a constraint immediately throws an exception.</p>
            <p>Here's an example of defining a foreign key, in which we use the <span class="CodeFont">REFERENCES</span>&#160;clause of a column definition in a <span class="CodeFont">CREATE&#160;TABLE</span>&#160;statement:</p>
            <div class="preWrapper"><pre class="Example">CREATE TABLE t1 (c1 NUMERIC PRIMARY KEY);

CREATE TABLE t2 (
   c1 NUMERIC PRIMARY KEY,
   c2 NUMERIC REFERENCES t1(c1) );</pre>
            </div>
            <p>And here's an example that uses the <span class="CodeFont"><a href="../../SQLReference/Clauses/Constraint.html">CONSTRAINT</a></span>&#160;clause to name the foreign key constraint:</p><pre class="Example" xml:space="preserve">CREATE TABLE t3 (
   c1 NUMERIC, 
   c2 NUMERIC,
   CONSTRAINT t1_fkey FOREIGN KEY (c1) REFERENCES t1);</pre>
            <p>You can also define a foreign key on a combination of columns:</p><pre class="Example" xml:space="preserve">CREATE TABLE dept_20
   (employee_id INT, hire_date DATE,
   CONSTRAINT fkey_empid_hiredate
   FOREIGN KEY (employee_id, hire_date)
   REFERENCES dept_21(employee_id, start_date));</pre>
            <h2>See Also</h2>
            <ul>
                <li value="1"><span class="CodeFont"><a href="../../SQLReference/Statements/AlterTable.html">ALTER&#160;TABLE</a></span>&#160;statement  in the <span class="ItalicFont">SQL&#160;Reference Manual</span></li>
                <li value="2"> <span class="CodeFont"><a href="../../SQLReference/Clauses/Constraint.html">CONSTRAINT</a></span> clause  in the <span class="ItalicFont">SQL&#160;Reference Manual</span></li>
                <li value="3"><span class="CodeFont"><a href="../../SQLReference/Statements/CreateTable.html">CREATE&#160;TABLE</a></span>&#160;statement  in the <span class="ItalicFont">SQL&#160;Reference Manual</span></li>
                <li value="4"><a href="DatabaseTriggers.html">Using Database Triggers</a>
                </li>
            </ul>
            <p>&#160;</p>
            <p style="font-size: 6pt;margin-top: 0;margin-bottom: 0;">&#160;</p>
        </div>
    </body>
</html>