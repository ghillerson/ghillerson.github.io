<!DOCTYPE html>
<html xmlns:MadCap="http://www.madcapsoftware.com/Schemas/MadCap.xsd" lang="en-us" xml:lang="en-us" class="reference" data-mc-search-type="Stem" data-mc-help-system-file-name="index.xml" data-mc-path-to-help-system="../../../" data-mc-conditions="Review.ReviewOff" data-mc-target-type="WebHelp2" data-mc-runtime-file-type="Topic" data-mc-preload-images="false" data-mc-in-preview-mode="false" data-mc-toc-path="SQL Reference|Statements|Data Definition (DDL): General Statements">
    <head>
        <meta name="viewport" content="width=device-width, initial-scale=1.0" />
        <meta charset="utf-8" />
        <meta http-equiv="X-UA-Compatible" content="IE=edge" />
        <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
        <meta name="description" content="Pins a table in memory." /><title>PIN TABLE statement</title>
        <link href="../../../Skins/Default/Stylesheets/Slideshow.css" rel="stylesheet" data-mc-generated="True" />
        <link href="../../../Skins/Default/Stylesheets/TextEffects.css" rel="stylesheet" data-mc-generated="True" />
        <link href="../../../Skins/Default/Stylesheets/Topic.css" rel="stylesheet" data-mc-generated="True" />
        <link href="../../../Skins/Default/Stylesheets/Components/Styles.css" rel="stylesheet" data-mc-generated="True" />
        <link href="../../../Skins/Default/Stylesheets/Components/Tablet.css" rel="stylesheet" data-mc-generated="True" />
        <link href="../../../Skins/Default/Stylesheets/Components/Mobile.css" rel="stylesheet" data-mc-generated="True" />
        <link href="../../../Resources/Stylesheets/SpliceTriPaneStyles.css" rel="stylesheet" />
        <script src="../../../Resources/Scripts/custom.modernizr.js">
        </script>
        <script src="../../../Resources/Scripts/jquery.min.js">
        </script>
        <script src="../../../Resources/Scripts/require.min.js">
        </script>
        <script src="../../../Resources/Scripts/require.config.js">
        </script>
        <script src="../../../Resources/Scripts/foundation.min.js">
        </script>
        <script src="../../../Resources/Scripts/plugins.min.js">
        </script>
        <script src="../../../Resources/Scripts/MadCapAll.js">
        </script>
    </head>
    <body>
        <p class="MCWebHelpFramesetLink MCWebHelpFramesetLinkTop"><a href="../../../index.html#Shared/SQLReference/Statements/PinTable.html">Open topic with navigation</a>
        </p>
        <div class="TopicContent">
            <h1><a name="kanchor364"></a>PIN&#160;TABLE</h1>
            <p>The <span class="CodeFont">PIN&#160;TABLE</span> statement allows you to pin (cache)&#160;a table in memory, which can improve performance for tables that are being used frequently in analytic operations. </p>
            <p class="noteImportant" data-mc-autonum="IMPORTANT: &#160;"><span class="autonumber"><span class="noteAutoNum">IMPORTANT: &#160;</span></span>The pinned version of a table is a static version of that table; updates to the underlying table are not automatically reflected in the pinned version. To refresh the pinned version, you need to unpin and then repin the table, as described in the <a href="#Usage">Usage Notes</a> section below.</p>
            <p class="heading2">Syntax</p>
            <div class="preWrapperWide"><pre class="FcnSyntax" xml:space="preserve">PIN&#160;TABLE&#160;<span class="ItalicFont">tableName</span>;</pre>
            </div>
            <div class="paramList">
                <p class="paramName">tableName</p>
                <p class="paramDefnFirst">A string that specifies the name of the table that you want to pin in memory. </p>
                <p class="paramDefn">An error occurs if the named table does not exist.</p>
            </div>
            <p class="heading2"><a name="Usage"></a>Usage Notes</p>
            <p>Here are a few important notes about using pinned tables:</p>
            <ul>
                <li value="1"><a href="#Pinned" class="MCXref xref" xrefformat="{para}">Pinned and Unpinned Table Versions</a>
                </li>
                <li value="2"><a href="#Refreshi" class="MCXref xref" xrefformat="{para}">Refreshing the Pinned Version of a Table</a>
                </li>
                <li value="3"><a href="#Unpinnin" class="MCXref xref" xrefformat="{para}">Unpinning and Dropping Pinned Tables</a>
                </li>
            </ul>
            <p class="heading3"><a name="Pinned"></a>Pinned and Unpinned Table Versions</p>
            <p>Once you pin a table, you effectively have two versions of it to work with:</p>
            <ul>
                <li value="1">The original table continues to work just as usual</li>
                <li value="2">The pinned version is a static version of the table at the time you pinned it. To access the pinned version of a table, you must specify the Splice <span class="CodeFont">pin=true</span> property. If you do not specify this property in your query, the query will operate on the unpinned version of the table. </li>
            </ul>
            <p>The pinned version (version)&#160;of a table is statically cached in memory; this means that:</p>
            <ul>
                <li value="1">Updates to the table (unpinned version)&#160;are not automatically reflected in the pinned version of the table.</li>
                <li value="2">Updates to the pinned version of the table are not permitted:&#160;you cannot insert into, delete from, or update the pinned version of a table.</li>
            </ul>
            <p>Here's a simple example that illustrates these qualities:</p>
            <div class="preWrapperWide"><pre class="Example" xml:space="preserve">splice&gt; CREATE TABLE myTbl (col1 int, col2 varchar(10));
0 rows inserted/updated/deleted
splice&gt; INSERT INTO myTbl VALUES (1, 'One'), (2, 'Two');
2 rows inserted/updated/deleted
splice&gt; PIN TABLE myTbl;
0 rows inserted/updated/deleted
splice&gt; INSERT INTO myTbl VALUES (3, 'Three'), (4, 'Four');
2 rows inserted/updated/deleted
splice&gt; SELECT * FROM myTbl;
COL1      |COL2
---------------------
1           One
2           Two
3           Three
4           Four

4 rows selected
splice&gt; SELECT * FROM myTbl --splice-properties pin=true
&gt; ;
COL1      |COL2
---------------------
1           One
2           Two<br /><br />2 rows selected<br />splice&gt;&#160;UPDATE&#160;myTbl SET&#160;col1=11 WHERE&#160;col1=1;<br />1 row inserted/updated/deleted<br />splice&gt;&#160;UPDATE&#160;myTbl --splice-properties pin=true<br />SET&#160;col1=21 WHERE&#160;col1=2;<br />ERROR:&#160;Pinned Table read failed with exception Table or view not found in database.</pre>
            </div>
            <p class="heading3"><a name="Refreshi"></a>Refreshing the Pinned Version of a Table</p>
            <p class="body">If you update the table and want the pinned version to reflect those updates, you need to refresh your pinned table version. You can simply unpin the table from memory, and then repin it into memory:</p>
            <div class="preWrapperWide"><pre class="Example" xml:space="preserve">splice&gt;&#160;UNPIN&#160;TABLE&#160;Players;<br />0 rows inserted/updated/deleted<br />splice&gt; PIN&#160;TABLE&#160;Players;<br />0 rows inserted/updated/deleted</pre>
            </div>
            <p class="body">Now the pinned version of the table matches the original version.</p>
            <p class="heading3"><a name="Unpinnin"></a>Unpinning and Dropping Pinned Tables</p>
            <p>When you drop a table (with the <span class="CodeFont"><a href="DropTable.html">DROP&#160;TABLE</a></span>&#160;statement), the pinned version is automatically deleted and can no longer be used.</p>
            <p>To delete just the pinned version of a table, use the <span class="CodeFont"><a href="UnpinTable.html">UNPIN&#160;TABLE</a></span> statement.</p>
            <p class="heading2">See Also</p>
            <ul>
                <li value="1"><span class="CodeFont"><a href="CreateExternalTable.html">CREATE&#160;EXTERNAL&#160;TABLE</a></span>&#160;statement</li>
                <li value="2"><span class="CodeFont"><a href="CreateTable.html">CREATE&#160;TABLE</a></span>&#160;statement</li>
                <li value="3"><span class="CodeFont"><a href="UnpinTable.html">UNPIN&#160;TABLE</a></span> statement</li>
                <li value="4"><a href="../../Developers/TuningAndDebugging/QueryOptimization.html">Query Optimizations</a> in the <span class="ItalicFont">Splice Machine Developer's Guide</span></li>
            </ul>
            <p style="font-size: 6pt;margin-top: 0;margin-bottom: 0;">&#160;</p>
        </div>
    </body>
</html>